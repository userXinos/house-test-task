(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5624)}])},6e3:function(e,t,n){"use strict";n.d(t,{J:function(){return s},w:function(){return a}});let r="https://jsonplaceholder.typicode.com";function s(e){let t=new URL("/posts",r);return Object.entries(e).forEach(e=>{let[n,r]=e;t.searchParams.set(n,r.toString())}),fetch(t).then(e=>e.json())}function a(e){let t=new URL("/posts/".concat(e,"/comments"),r);return fetch(t).then(e=>e.json())}},5624:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(5893),s=n(9008),a=n.n(s),c=n(1163),i=n(7294),o=n(1358),u=n.n(o),l=n(1037),h=n.n(l),f=n(7536);function _(e){let{onSubmit:t,lastSearched:n}=e,{register:s,handleSubmit:a}=(0,f.cI)();return(0,r.jsxs)("form",{className:h().form,onSubmit:a(e=>{let{text:n}=e;return t(n.trim())}),children:[(0,r.jsx)("input",{...s("text"),placeholder:n}),(0,r.jsx)("button",{type:"submit",children:"Поиск"})]})}var p=n(6718),d=n.n(p),m=n(6e3);function g(){let e=(0,c.useRouter)(),[t,n]=(0,i.useState)([]),[s,o]=(0,i.useState)(""),[l,h]=(0,i.useState)(1),f=(0,i.useRef)();return(0,i.useEffect)(()=>{f.current=new URL(window.location.href),p()},[]),(0,r.jsxs)("div",{children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"Posts"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:d().container,children:[(0,r.jsx)(_,{onSubmit:function(t){f.current&&(f.current.searchParams.set("search",encodeURI(t)),f.current.searchParams.set("page","1"),e.push(f.current)),p()},lastSearched:s}),t.map(t=>(0,r.jsxs)("div",{className:d().post,children:[(0,r.jsx)("h2",{className:d().title,onClick:()=>{var n;return n=t.id,void e.push("/comments/".concat(n))},children:t.title}),(0,r.jsx)("p",{children:t.body})]},t.id)),(0,r.jsx)(u(),{pageCount:10,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(t){let{selected:n}=t;f.current&&(f.current.searchParams.set("page",(n+1).toString()),e.push(f.current)),p()},containerClassName:d().pagination,activeClassName:d().active,nextLabel:"вперёд >",previousLabel:"< назад",forcePage:l})]})]});async function p(){if(f.current){let e=parseInt(f.current.searchParams.get("page")||"1"),t=decodeURI(f.current.searchParams.get("search")||"");o(t),h(e-1),n(await (0,m.J)({_page:e,title_like:t,_limit:10}))}}}},6718:function(e){e.exports={container:"Home_container__B1VFq",post:"Home_post__T0MEf",title:"Home_title__CJM6I",pagination:"Home_pagination__dL6Uo",disabled:"Home_disabled__lsq1Z",active:"Home_active__sZ8R_"}},1037:function(e){e.exports={form:"Search_form__E0Vpb"}}},function(e){e.O(0,[774,181,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);